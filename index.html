<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  
  <title>Frontend Mentor | Typing Speed Test</title>

  <style>
    @font-face{font-family:'Sora';font-weight:400;src:url('./assets/fonts/Sora/static/Sora-Regular.ttf') format('truetype')}
    @font-face{font-family:'Sora';font-weight:600;src:url('./assets/fonts/Sora/static/Sora-SemiBold.ttf') format('truetype')}
    @font-face{font-family:'Sora';font-weight:700;src:url('./assets/fonts/Sora/static/Sora-Bold.ttf') format('truetype')}
    :root{--n900:hsl(0,0%,7%);--n800:hsl(0,0%,15%);--n500:hsl(240,3%,46%);--n400:hsl(240,1%,59%);--n0:hsl(0,0%,100%);--b600:hsl(214,100%,55%);--b400:hsl(210,100%,65%);--r500:hsl(354,63%,57%);--y400:hsl(49,85%,70%)}
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0}
    img{max-width:100%;display:block}
    button{font:inherit;cursor:pointer}
    body{font-family:'Sora',system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif;background:var(--n900)}
    #app{width:100vw;max-width:none;margin:0;min-height:100vh;padding:20px 28px 40px;background:var(--n900);color:var(--n400);border-radius:0;box-shadow:none}
    header{display:flex;justify-content:space-between;align-items:center}
    .brand{display:flex;align-items:center;gap:10px}
    .brand img{width:24px;height:24px}
    .brand h1{margin:0;font-size:18px;font-weight:700;color:var(--n0)}
    .brand p{margin:0;font-size:12px;color:var(--n500)}
    .personal-best{display:flex;align-items:center;gap:8px;color:var(--n0);font-size:13px}
    .personal-best img{width:18px;height:18px}
    .toolbar{display:flex;justify-content:space-between;align-items:center;margin-top:12px;padding:12px 0 16px;border-bottom:1px solid rgba(255,255,255,.12)}
    .metrics{display:flex;gap:28px}
    .metrics p{margin:0;color:var(--n500);font-size:14px}
    .metrics span{color:var(--n0);font-weight:600}
    .is-started #stat-accuracy{color:var(--r500)}
    .is-started #stat-time{color:var(--y400)}
    .toggles{display:flex;gap:24px;align-items:center}
    .label{color:var(--n500);font-size:12px;margin-right:8px}
    .control-group{display:flex;align-items:center}
    .control-group [role="group"]{display:flex;gap:8px}
    .control-group button{background:transparent;color:var(--n400);border:1px solid rgba(255,255,255,.16);border-radius:9999px;padding:6px 12px;line-height:1}
    .control-group button.is-active{background:rgba(48,122,255,.18);border-color:var(--b600);color:var(--n0)}
    .typing{position:relative;padding-top:24px;border-top:1px solid rgba(255,255,255,.12);flex:1;display:flex;flex-direction:column}
    .passage{font-size:28px;line-height:1.6;color:var(--n400);flex:1;min-height:200px;display:flex;align-items:center}
    .start{display:none}
    .is-not-started .passage{filter:blur(6px)}
    .is-not-started .start{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:10px}
    #start-btn{display:inline-block;text-decoration:none;background:var(--b600);color:var(--n0);border:none;border-radius:12px;padding:10px 16px}
    #start-btn:hover{background:var(--b400)}
    #start-btn:focus-visible{outline:2px solid var(--b400);outline-offset:2px}
    .results{padding:24px 0}
    @media (max-width:640px){
      html,body{height:100%;overflow:hidden}
      #app{width:100vw;margin:0;height:100vh;display:flex;flex-direction:column;padding:16px;border-radius:0;box-shadow:none}
      .toolbar{flex-direction:column;gap:12px}
      .toggles{flex-direction:row;gap:12px}
      .label{display:none}
      .control-group{flex:1}
      .metrics{display:grid;grid-template-columns:repeat(3,1fr);gap:0;align-items:start}
      .metrics p{padding:8px;margin:0}
      .metrics p+ p{border-left:1px solid rgba(255,255,255,.16)}
      .metrics span{display:block;font-size:18px;font-weight:700;color:var(--n0)}
      .control-group [role="group"]{display:none}
      .control-select{display:flex;gap:12px;width:100%}
      .control-select>*,.control-select .select-wrap{flex:1}
      .control-select select{width:100%;appearance:auto}
      .control-select .select-wrap::after{content:none}
      .is-not-started .brand h1,.is-not-started .brand p{display:none}
      .passage{font-size:24px;min-height:180px}
      .typing{padding-top:16px}
    }
    .dropdown-menu{list-style:none;margin:0;padding:0}
  </style>
</head>
<body>
  <main id="app" class="is-not-started">
    <header>
      <div class="brand">
        <img src="./assets/images/logo-small.svg" alt="" aria-hidden="true">
        <div>
          <h1>Typing Speed Test</h1>
          <p>Type as fast as you can in 60 seconds</p>
        </div>
      </div>
      <div class="personal-best" aria-live="polite">
        <img src="./assets/images/icon-personal-best.svg" alt="" aria-hidden="true">
        <span>Personal best:</span>
        <strong id="personal-best">0 WPM</strong>
      </div>
    </header>

    <section class="toolbar" aria-label="Stats and controls">
      <div class="metrics">
        <p>WPM: <span id="stat-wpm">0</span></p>
        <p>Accuracy: <span id="stat-accuracy">100%</span></p>
        <p>Time: <span id="stat-time">0:60</span></p>
      </div>
      <div class="toggles">
        <div class="control-group">
          <span class="label">Difficulty:</span>
          <div role="group" aria-label="Select difficulty">
            <button type="button" id="diff-easy">Easy</button>
            <button type="button" id="diff-medium">Medium</button>
            <button type="button" id="diff-hard" class="is-active">Hard</button>
          </div>
        </div>
        <div class="control-group">
          <span class="label">Mode:</span>
          <div role="group" aria-label="Select mode">
            <button type="button" id="mode-timed" class="is-active">Timed (60s)</button>
            <button type="button" id="mode-passage">Passage</button>
          </div>
        </div>
      </div>

    </section>

    <section class="typing" aria-label="Typing area">
      <article class="passage" id="passage" tabindex="0">The archaeological expedition unearthed artifacts that complicated prevailing theories about Bronze Age trade networks. Obsidian from Anatolia, lapis lazuli from Afghanistan, and amber from the Baltic—all discovered in a single Mycenaean tomb—suggested commercial connections far more extensive than previously hypothesized.</article>
      <div class="start">
        <a href="./started.html" id="start-btn">Start Typing Test</a>
        <p>Or click the text and start typing</p>
      </div>
    </section>

    <footer class="footer-actions" id="footer-actions" aria-label="Actions" hidden>
      <button type="button" id="restart-btn"><img src="./assets/images/icon-restart.svg" alt="" aria-hidden="true">Restart Test</button>
    </footer>

    <section class="results" id="results" aria-label="Results" hidden>
      <h2>Test Complete!</h2>
      <p>Solid run. Keep pushing to beat your high score.</p>
      <dl>
        <div>
          <dt>WPM</dt><dd id="result-wpm">0</dd>
        </div>
        <div>
          <dt>Accuracy</dt><dd id="result-accuracy">100%</dd>
        </div>
        <div>
          <dt>Characters</dt><dd id="result-characters">0/0</dd>
        </div>
      </dl>
    </section>
  </main>
  <script>
    (function(){
      var pb=localStorage.getItem('personalBestWpm');
      var pbEl=document.getElementById('personal-best');
      if(pbEl){pbEl.textContent=((pb? pb : 0))+' WPM';}
      function setupDropdown(rootId, storageKey, fallbackLabel){
        var root=document.getElementById(rootId); if(!root) return;
        var btn=root.querySelector('.dropdown-btn'); var menu=root.querySelector('.dropdown-menu');
        var saved=localStorage.getItem(storageKey);
        if(saved){menu.querySelectorAll('li[role="option"]').forEach(function(li){li.setAttribute('aria-selected', li.dataset.value===saved?'true':'false')});
          var sel=menu.querySelector('li[aria-selected="true"]'); if(sel) btn.textContent=sel.textContent.trim();
        } else {btn.textContent=fallbackLabel}
        btn.addEventListener('click',function(){var open=root.classList.toggle('open');btn.setAttribute('aria-expanded',open)});
        menu.addEventListener('click',function(e){var li=e.target.closest('li[role="option"]'); if(!li) return;
          menu.querySelectorAll('li[role="option"]').forEach(function(x){x.setAttribute('aria-selected','false')});
          li.setAttribute('aria-selected','true'); btn.textContent=li.textContent.trim();
          root.classList.remove('open'); btn.setAttribute('aria-expanded','false');
          localStorage.setItem(storageKey, li.dataset.value);
        });
        document.addEventListener('click',function(ev){if(!root.contains(ev.target)){root.classList.remove('open');btn.setAttribute('aria-expanded','false')}});
      }
      setupDropdown('diff-dropdown','selectedDifficulty','Hard');
      setupDropdown('mode-dropdown','selectedMode','Timed (60s)');
    })();
  </script>
</body>
</html>
